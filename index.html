<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Triagem de TDAH – NAPED</title>
  <style>
    :root {
      --accent-color: #1a237e;
      --text-color: #333333;
      --bg-color: #f5f5f5;
      --card-bg: #ffffff;
      --font-family: Arial, sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0;
      font-family: var(--font-family);
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
    }
    header, .disclaimer, .footer, .relatorio-wrap {
      padding: 16px;
      background-color: var(--card-bg);
      margin: 8px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header h1 { margin: 0; font-size: 1.8em; color: var(--accent-color); }
    .disclaimer { border-left: 4px solid var(--accent-color); font-size: 0.95em; }
    form { padding: 8px; margin: 8px; }
    .card {
      background-color: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 16px;
      padding: 16px;
    }
    .card legend {
      font-size: 1.2em;
      color: var(--accent-color);
      margin-bottom: 8px;
      font-weight: bold;
    }
    .row { display: grid; grid-template-columns: 1fr; gap: 8px; }
    @media (min-width: 640px) { .row-2 { grid-template-columns: repeat(2, 1fr); } }
    label.inline { font-weight: 600; font-size: .95em; }
    input[type="text"], input[type="datetime-local"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc; border-radius: 6px;
      background: #fafafa;
    }
    .questao { margin-bottom: 12px; }
    .questao p { margin: 0 0 6px 0; font-weight: bold; }
    .options { display: flex; gap: 16px; }
    .options label {
      flex: 1;
      background-color: var(--bg-color);
      padding: 10px 8px;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
      border: 1px solid #ccc;
      transition: background-color 0.2s, border-color 0.2s;
      user-select: none;
    }
    .options input { display: none; }
    .options input:checked + label {
      background-color: var(--accent-color);
      color: #ffffff;
      border-color: var(--accent-color);
      font-weight: 600;
    }
    button {
      width: 100%;
      padding: 14px;
      font-size: 1em;
      background-color: var(--accent-color);
      color: #ffffff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    button:hover { opacity: 0.9; }
    button.secondary { background-color: #3949ab; margin-top: 0; }
    #resultado {
      margin: 16px 8px 0 8px;
      padding: 16px;
      background-color: var(--card-bg);
      color: var(--accent-color);
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      white-space: pre-wrap;
      font-weight: 600;
    }
    .relatorio-wrap h2 { margin: 0 0 8px 0; color: var(--accent-color); font-size: 1.2em; }
    #relatorioText {
      width: 100%;
      min-height: 380px;
      resize: vertical;
      padding: 12px;
      border: 1px solid #ccc;
      background: #fafafa;
      border-radius: 8px;
      font-family: ui-monospace, Menlo, Consolas, monospace;
      white-space: pre;
    }
    .relatorio-actions {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 8px;
    }
    @media (min-width: 560px) { .relatorio-actions { grid-template-columns: repeat(2, 1fr); } }
    .footer small { display: block; color: #666; }
  </style>
</head>
<body>

  <header>
    <h1>Triagem de TDAH</h1>
  </header>

  <div class="disclaimer">
    <strong>Atenção:</strong> Este questionário é uma ferramenta de triagem e não substitui avaliação por psicólogo ou psiquiatra. Encaminhamentos devem ser realizados ao NAPED ou a profissionais competentes.
  </div>

  <form id="tdahForm" autocomplete="off">
    <fieldset class="card">
      <legend>Identificação (opcional)</legend>
      <div class="row row-2">
        <div>
          <label class="inline" for="nome">Nome do(a) acadêmico(a)</label>
          <input type="text" id="nome" name="nome" placeholder="Ex.: Ana Silva"/>
        </div>
        <div>
          <label class="inline" for="curso">Curso / Turma</label>
          <input type="text" id="curso" name="curso" placeholder="Ex.: Farmácia / 5º período"/>
        </div>
        <div>
          <label class="inline" for="avaliador">Avaliador(a)</label>
          <input type="text" id="avaliador" name="avaliador" placeholder="Ex.: Prof. Márcio Marques"/>
        </div>
        <div>
          <label class="inline" for="datahora">Data e hora</label>
          <input type="datetime-local" id="datahora" name="datahora"/>
        </div>
      </div>
    </fieldset>

    <fieldset class="card">
      <legend>Seção 1 – Sintomas de Inatenção (marque ≥ 4)</legend>
      <div class="questao">
        <p>1) Dificuldade em manter atenção em aulas e leituras</p>
        <div class="options">
          <input type="radio" id="sec1_q1_sim" name="sec1_q1" value="Sim"><label for="sec1_q1_sim">Sim</label>
          <input type="radio" id="sec1_q1_nao" name="sec1_q1" value="Não"><label for="sec1_q1_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>2) Erros por descuido em atividades acadêmicas</p>
        <div class="options">
          <input type="radio" id="sec1_q2_sim" name="sec1_q2" value="Sim"><label for="sec1_q2_sim">Sim</label>
          <input type="radio" id="sec1_q2_nao" name="sec1_q2" value="Não"><label for="sec1_q2_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>3) Dificuldade em seguir instruções e completar tarefas</p>
        <div class="options">
          <input type="radio" id="sec1_q3_sim" name="sec1_q3" value="Sim"><label for="sec1_q3_sim">Sim</label>
          <input type="radio" id="sec1_q3_nao" name="sec1_q3" value="Não"><label for="sec1_q3_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>4) Desorganização em materiais e prazos acadêmicos</p>
        <div class="options">
          <input type="radio" id="sec1_q4_sim" name="sec1_q4" value="Sim"><label for="sec1_q4_sim">Sim</label>
          <input type="radio" id="sec1_q4_nao" name="sec1_q4" value="Não"><label for="sec1_q4_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>5) Esquecimento de compromissos e prazos</p>
        <div class="options">
          <input type="radio" id="sec1_q5_sim" name="sec1_q5" value="Sim"><label for="sec1_q5_sim">Sim</label>
          <input type="radio" id="sec1_q5_nao" name="sec1_q5" value="Não"><label for="sec1_q5_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>6) Distração fácil por estímulos irrelevantes</p>
        <div class="options">
          <input type="radio" id="sec1_q6_sim" name="sec1_q6" value="Sim"><label for="sec1_q6_sim">Sim</label>
          <input type="radio" id="sec1_q6_nao" name="sec1_q6" value="Não"><label for="sec1_q6_nao">Não</label>
        </div>
      </div>
    </fieldset>

    <fieldset class="card">
      <legend>Seção 2 – Sintomas de Hiperatividade/Impulsividade (marque ≥ 4)</legend>
      <div class="questao">
        <p>1) Inquietação ou dificuldade em permanecer sentado</p>
        <div class="options">
          <input type="radio" id="sec2_q1_sim" name="sec2_q1" value="Sim"><label for="sec2_q1_sim">Sim</label>
          <input type="radio" id="sec2_q1_nao" name="sec2_q1" value="Não"><label for="sec2_q1_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>2) Fala excessiva em aula e discussões</p>
        <div class="options">
          <input type="radio" id="sec2_q2_sim" name="sec2_q2" value="Sim"><label for="sec2_q2_sim">Sim</label>
          <input type="radio" id="sec2_q2_nao" name="sec2_q2" value="Não"><label for="sec2_q2_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>3) Interrompe colegas ou professores com frequência</p>
        <div class="options">
          <input type="radio" id="sec2_q3_sim" name="sec2_q3" value="Sim"><label for="sec2_q3_sim">Sim</label>
          <input type="radio" id="sec2_q3_nao" name="sec2_q3" value="Não"><label for="sec2_q3_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>4) Dificuldade em aguardar a vez em atividades de grupo</p>
        <div class="options">
          <input type="radio" id="sec2_q4_sim" name="sec2_q4" value="Sim"><label for="sec2_q4_sim">Sim</label>
          <input type="radio" id="sec2_q4_nao" name="sec2_q4" value="Não"><label for="sec2_q4_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>5) Sensação interna de inquietação ou impaciência</p>
        <div class="options">
          <input type="radio" id="sec2_q5_sim" name="sec2_q5" value="Sim"><label for="sec2_q5_sim">Sim</label>
          <input type="radio" id="sec2_q5_nao" name="sec2_q5" value="Não"><label for="sec2_q5_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>6) Dificuldade em atividades silenciosas ou tranquilas</p>
        <div class="options">
          <input type="radio" id="sec2_q6_sim" name="sec2_q6" value="Sim"><label for="sec2_q6_sim">Sim</label>
          <input type="radio" id="sec2_q6_nao" name="sec2_q6" value="Não"><label for="sec2_q6_nao">Não</label>
        </div>
      </div>
    </fieldset>

    <fieldset class="card">
      <legend>Seção 3 – Impacto no Desempenho Acadêmico (marque ≥ 1)</legend>
      <div class="questao">
        <p>1) Perda frequente de prazos e compromissos</p>
        <div class="options">
          <input type="radio" id="sec3_q1_sim" name="sec3_q1" value="Sim"><label for="sec3_q1_sim">Sim</label>
          <input type="radio" id="sec3_q1_nao" name="sec3_q1" value="Não"><label for="sec3_q1_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>2) Notas abaixo do potencial mesmo com esforço</p>
        <div class="options">
          <input type="radio" id="sec3_q2_sim" name="sec3_q2" value="Sim"><label for="sec3_q2_sim">Sim</label>
          <input type="radio" id="sec3_q2_nao" name="sec3_q2" value="Não"><label for="sec3_q2_nao">Não</label>
        </div>
      </div>
      <div class="questao">
        <p>3) Dificuldade em concluir trabalhos acadêmicos</p>
        <div class="options">
          <input type="radio" id="sec3_q3_sim" name="sec3_q3" value="Sim"><label for="sec3_q3_sim">Sim</label>
          <input type="radio" id="sec3_q3_nao" name="sec3_q3" value="Não"><label for="sec3_q3_nao">Não</label>
        </div>
      </div>
    </fieldset>

    <button type="button" id="calculateBtn">Calcular Resultado</button>
  </form>

  <div id="resultado" aria-live="polite"></div>

  <div class="relatorio-wrap" id="relatorioWrap" style="display:none;">
    <h2>Relatório</h2>
    <textarea id="relatorioText" readonly></textarea>
    <div class="relatorio-actions">
      <button type="button" id="copyBtn" class="secondary" disabled>Copiar Relatório</button>
      <button type="button" id="limparBtn" class="secondary" style="background:#283593;">Limpar Formulário</button>
    </div>
  </div>

  <div class="footer">
    Produzido para o Professor Márcio Marques (@profmarciomarx). Ferramenta de triagem para apoio ao encaminhamento ao NAPED.
    <small>
      Declaração: Este instrumento não é uma ferramenta de diagnóstico, mas sim de triagem e apoio às observações do professor.
      A confirmação diagnóstica cabe exclusivamente a profissionais qualificados (psicólogo/psiquiatra).
    </small>
  </div>

  <script>
    function getCheckedValue(name) {
      const el = document.querySelector('input[name="' + name + '"]:checked');
      return el ? el.value : 'Não informado';
    }

    function contarSim(prefixo, total) {
      let c = 0;
      for (let i = 1; i <= total; i++) {
        if (getCheckedValue(prefixo + '_q' + i) === 'Sim') c++;
      }
      return c;
    }

    function exibirResultadoVisual(s1, s2, s3, decisao) {
      let msg = 'Seção 1: ' + s1 + ' "Sim", Seção 2: ' + s2 + ' "Sim", Seção 3: ' + s3 + ' "Sim".\n';
      msg += 'Resultado: ' + decisao + '.';
      document.getElementById('resultado').innerText = msg;
    }

    function gerarRelatorio() {
      const nome = (document.getElementById('nome').value || '').trim();
      const curso = (document.getElementById('curso').value || '').trim();
      const avaliador = (document.getElementById('avaliador').value || '').trim();
      const datahora = (document.getElementById('datahora').value || '').trim();

      const s1 = contarSim('sec1', 6);
      const s2 = contarSim('sec2', 6);
      const s3 = contarSim('sec3', 3);
      const encaminhar = ((s1 >= 4) || (s2 >= 4)) && (s3 >= 1);
      const decisao = encaminhar ? 'ENCAMINHAR ao NAPED' : 'NÃO é necessário encaminhar';

      const sec1Txt = [
        '1) Dificuldade em manter atenção em aulas e leituras',
        '2) Erros por descuido em atividades acadêmicas',
        '3) Dificuldade em seguir instruções e completar tarefas',
        '4) Desorganização em materiais e prazos acadêmicos',
        '5) Esquecimento de compromissos e prazos',
        '6) Distração fácil por estímulos irrelevantes'
      ];
      const sec2Txt = [
        '1) Inquietação ou dificuldade em permanecer sentado',
        '2) Fala excessiva em aula e discussões',
        '3) Interrompe colegas ou professores com frequência',
        '4) Dificuldade em aguardar a vez em atividades de grupo',
        '5) Sensação interna de inquietação ou impaciência',
        '6) Dificuldade em atividades silenciosas ou tranquilas'
      ];
      const sec3Txt = [
        '1) Perda frequente de prazos e compromissos',
        '2) Notas abaixo do potencial mesmo com esforço',
        '3) Dificuldade em concluir trabalhos acadêmicos'
      ];

      function bloco(prefixo, total, textos, titulo) {
        let lines = [];
        lines.push(titulo);
        for (let i = 1; i <= total; i++) {
          const pergunta = textos[i-1];
          const resp = getCheckedValue(prefixo + '_q' + i);
          lines.push(pergunta);
          lines.push('Resposta: ' + resp);
          lines.push('');
        }
        lines.push('Total "Sim": ' + (prefixo === 'sec1' ? s1 : prefixo === 'sec2' ? s2 : s3));
        lines.push('');
        return lines.join('\n');
      }

      const cabecalho = [
        '=== Triagem de TDAH – NAPED ===',
        'Acadêmico(a): ' + (nome || '—'),
        'Curso/Turma: ' + (curso || '—'),
        'Avaliador(a): ' + (avaliador || '—'),
        'Data/Hora: ' + (datahora || new Date().toLocaleString()),
        ''
      ].join('\n');

      const corpo =
        bloco('sec1', 6, sec1Txt, 'Seção 1 – Inatenção:') +
        bloco('sec2', 6, sec2Txt, 'Seção 2 – Hiperatividade/Impulsividade:') +
        bloco('sec3', 3, sec3Txt, 'Seção 3 – Impacto Acadêmico:') +
        'Resultado Final: ' + decisao + '\n\n' +
        'Declaração de responsabilidade:\n' +
        '- Este instrumento NÃO é uma ferramenta de diagnóstico; trata-se de triagem e apoio às observações do(a) professor(a).\n' +
        '- A confirmação diagnóstica cabe SOMENTE a profissionais qualificados (psicólogo(a)/psiquiatra).\n' +
        '- O resultado aqui apresentado não autoriza intervenções sem avaliação clínica formal.';

      return cabecalho + corpo;
    }

    function calcular() {
      const s1 = contarSim('sec1', 6);
      const s2 = contarSim('sec2', 6);
      const s3 = contarSim('sec3', 3);
      const encaminhar = ((s1 >= 4) || (s2 >= 4)) && (s3 >= 1);
      const decisao = encaminhar ? 'ENCAMINHAR ao NAPED' : 'NÃO é necessário encaminhar';

      exibirResultadoVisual(s1, s2, s3, decisao);

      const relatorio = gerarRelatorio();
      const relatorioWrap = document.getElementById('relatorioWrap');
      const relatorioText = document.getElementById('relatorioText');
      const copyBtn = document.getElementById('copyBtn');

      relatorioText.value = relatorio;
      relatorioWrap.style.display = 'block';
      copyBtn.disabled = false;
    }

    function copiarRelatorio() {
      const txt = document.getElementById('relatorioText').value;
      if (!txt) return;

      function fallbackCopy(texto) {
        try {
          const ta = document.createElement('textarea');
          ta.value = texto;
          ta.style.position = 'fixed';
          ta.style.opacity = '0';
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          const ok = document.execCommand('copy');
          document.body.removeChild(ta);
          if (ok) {
            alert('Relatório copiado para a área de transferência.');
          } else {
            alert('Não foi possível copiar automaticamente. Selecione o texto e copie manualmente.');
          }
        } catch (e) {
          alert('Não foi possível copiar automaticamente. Selecione o texto e copie manualmente.');
        }
      }

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(txt)
          .then(function(){ alert('Relatório copiado para a área de transferência.'); })
          .catch(function(){ fallbackCopy(txt); });
      } else {
        fallbackCopy(txt);
      }
    }

    function limparFormulario() {
      document.getElementById('tdahForm').reset();
      document.getElementById('resultado').innerText = '';
      document.getElementById('relatorioText').value = '';
      document.getElementById('relatorioWrap').style.display = 'none';
      document.getElementById('copyBtn').disabled = true;
    }

    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('calculateBtn').addEventListener('click', calcular);
      document.getElementById('copyBtn').addEventListener('click', copiarRelatorio);
      document.getElementById('limparBtn').addEventListener('click', limparFormulario);
    });
  </script>
</body>
</html>
